<Modal @id='translation'>
  {{#if this.isDone}}
    <div class='status'>
      <Tag @text='done' @theme='green-1 admin medium' />
      <p>no action required</p>
    </div>

    <Field::String
      @id='source'
      @label={{this.sourceLabel}}
      @legend={{this.sourceLegend}}
      @record={{this.record}}
      @attribute='english'
      @disabled={{true}}
      @multiline={{true}}
    />

    <Field::String
      @id='native'
      @label={{this.nativeLabel}}
      @legend={{this.nativeLegend}}
      @record={{this.record}}
      @attribute='native'
      @hideSave={{true}}
      @onEnter={{this.onClickSave}}
      @multiline={{true}}
    />

    <div class='actions'>
      <div class='left'>
        {{#if this.hasChanges}}
          <Button
            @text='Save'
            @theme='medium green'
            @onClick={{this.onClickSave}}
          />

          <Button
            @text='Undo changes'
            @theme='medium grey'
            @onClick={{this.onClickUndo}}
          />
        {{else}}
          <Button
            @text='Edit'
            @theme='medium grey'
            @onClick={{this.onClickEdit}}
          />
        {{/if}}
      </div>

      <div class='right'>
        <Button
          @icon='chevron-left'
          @theme='medium grey'
          @onClick={{this.onClickLeftArrow}}
        />

        <Button
          @icon='chevron-right'
          @theme='medium grey'
          @onClick={{this.onClickRightArrow}}
        />
      </div>
    </div>

    {{#if this.showError}}
      <Error::Generic />
    {{/if}}
  {{/if}}

  {{#if this.isToReview}}
    <div class='status'>
      <Tag @text='to review' @theme='blue-2 admin medium' />
      <p>translated by a robot, please review</p>
    </div>

    <Field::String
      @id='source'
      @label={{this.sourceLabel}}
      @legend={{this.sourceLegend}}
      @record={{this.record}}
      @attribute='english'
      @disabled={{true}}
      @multiline={{true}}
    />

    <Field::String
      @id='native'
      @label={{this.nativeLabel}}
      @legend={{this.nativeLegend}}
      @record={{this.record}}
      @attribute='native'
      @disabled={{true}}
      @multiline={{true}}
    />

    <div class='actions'>
      <div class='left'>
        <Button
          @text='Accept'
          @theme='medium grey'
          @onClick={{this.onClickAccept}}
        />

        <Button
          @text='Reject'
          @theme='medium grey'
          @onClick={{this.onClickReject}}
        />
      </div>

      <div class='right'>
        <Button
          @icon='chevron-left'
          @theme='medium grey'
          @onClick={{this.onClickLeftArrow}}
        />

        <Button
          @icon='chevron-right'
          @theme='medium grey'
          @onClick={{this.onClickRightArrow}}
        />
      </div>
    </div>

    {{#if this.showError}}
      <Error::Generic />
    {{/if}}
  {{/if}}

  {{#if this.isToUpdate}}
    <div class='status'>
      <Tag @text='to update' @theme='orange-2 admin medium' />
    </div>

    <p class='update-cta'>
      The English source of this translation has changed on our website. Please
      update the
      {{this.languageFull}}
      translation below in the same way. Words marked green are added. Words
      marked red have been removed.
    </p>

    <h3>English before change</h3>
    <p>{{this.record.englishBefore}}</p>
    <h3>English now</h3>
    <p>{{this.record.english}}</p>
    <h3>Changes</h3>
    <p>{{this.diff}}</p>

    <Field::String
      @id='native'
      @label={{this.nativeLabel}}
      @legend={{this.nativeLegend}}
      @record={{this.record}}
      @attribute='native'
      @multiline={{true}}
      @hideSave={{true}}
    />

    <div class='actions'>
      <div class='left'>
        {{#if this.hasChanges}}
          <Button
            @text='Save'
            @theme='medium green'
            @onClick={{this.onClickSave}}
          />
        {{else}}
          <Button
            @text='No changes'
            @theme='medium grey'
            @onClick={{this.onClickSave}}
          />
        {{/if}}

        <Button
          @text={{if this.isTranslating 'Translating ...' 'Auto-translate'}}
          @theme='medium grey {{if this.isTranslating "busy"}}'
          @onClick={{this.onClickAutoTranslate}}
          @isBusy={{this.isTranslating}}
        />
      </div>

      <div class='right'>
        <Button
          @icon='chevron-left'
          @theme='medium grey'
          @onClick={{this.onClickLeftArrow}}
        />

        <Button
          @icon='chevron-right'
          @theme='medium grey'
          @onClick={{this.onClickRightArrow}}
        />
      </div>
    </div>

    {{#if this.showError}}
      <Error::Generic />
    {{/if}}
  {{/if}}

  {{#if this.isToTranslate}}
    <div class='status'>
      <Tag @text='to translate' @theme='red-1 admin medium' />
      <p>urgent</p>
    </div>

    <Field::String
      @id='source'
      @label={{this.sourceLabel}}
      @legend={{this.sourceLegend}}
      @record={{this.record}}
      @attribute='english'
      @disabled={{true}}
      @multiline={{true}}
    />

    <Field::String
      @id='native'
      @label={{this.nativeLabel}}
      @legend={{this.nativeLegend}}
      @record={{this.record}}
      @attribute='native'
      @hideSave={{true}}
      @onEnter={{this.onClickSave}}
      @multiline={{true}}
    />

    <div class='actions'>
      <div class='left'>
        {{#if this.hasChanges}}
          <Button
            @text='Save'
            @theme='medium green'
            @onClick={{this.onClickSave}}
          />
        {{/if}}

        <Button
          @text={{if this.isTranslating 'Translating ...' 'Auto-translate'}}
          @theme='medium grey {{if this.isTranslating "busy"}}'
          @onClick={{this.onClickAutoTranslate}}
          @isBusy={{this.isTranslating}}
        />
      </div>

      <div class='right'>
        <Button
          @icon='chevron-left'
          @theme='medium grey'
          @onClick={{this.onClickLeftArrow}}
        />

        <Button
          @icon='chevron-right'
          @theme='medium grey'
          @onClick={{this.onClickRightArrow}}
        />
      </div>
    </div>

    {{#if this.showError}}
      <Error::Generic />
    {{/if}}
  {{/if}}

  {{#if this.hasError}}
    <div class='status'>
      <Tag @text='error' @theme='red-1 admin medium' />
    </div>

    <p>
      There was an issue with this translation. Jan has been notified and will
      look for a solution soon.
    </p>

    <p>ID: {{this.record.id}}</p>
    <p>Location: {{this.record.location}}</p>
    <p>Error: {{this.record.error}}</p>
    <p>English: {{this.record.english}}</p>
    <p>{{this.languageFull}}: {{this.record.native}}</p>

    <div class='actions'>
      <div class='left'>
        <Button
          @text='Reset'
          @theme='medium grey'
          @onClick={{this.onClickReset}}
        />
      </div>

      <div class='right'>
        <Button
          @icon='chevron-left'
          @theme='medium grey'
          @onClick={{this.onClickLeftArrow}}
        />

        <Button
          @icon='chevron-right'
          @theme='medium grey'
          @onClick={{this.onClickRightArrow}}
        />
      </div>
    </div>
  {{/if}}

  <div {{did-insert this.onInsert}}></div>
</Modal>