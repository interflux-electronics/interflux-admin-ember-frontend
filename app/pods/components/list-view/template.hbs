<div class='list-view'>
  <header>
    <div class='left'>
      <h1>{{@title}}</h1>
    </div>

    <div class='right'>
      {{#each @buttons as |button|}}
        {{#unless button.hide}}
          <Button
            @text={{if button.isBusy button.busyLabel button.label}}
            @theme={{concat button.theme (if button.isBusy ' busy')}}
            @onClick={{fn @onClickButton button}}
            @isBusy={{button.isBusy}}
          />
        {{/unless}}
      {{/each}}
    </div>
  </header>

  <aside>
    <div class='sticky'>
      {{#each @filters as |filter|}}
        {{#if (eq filter.type 'options')}}
          <div class='options'>
            {{#each filter.options as |option|}}
              <button type='button' onclick={{fn @onFilter filter option}}>
                {{#if option.selected}}
                  <Svg::OptionSelected />
                {{else}}
                  <Svg::OptionUnselected />
                {{/if}}
                <span>{{option.label}}</span>
              </button>
            {{/each}}
          </div>
        {{/if}}

        {{#if (eq filter.type 'checkboxes')}}
          <div class='checkboxes'>
            {{#each filter.checkboxes as |checkbox|}}
              <button type='button' onclick={{fn @onFilter filter checkbox}}>
                {{#if checkbox.checked}}
                  <Svg::CheckboxSelected />
                {{else}}
                  <Svg::CheckboxUnselected />
                {{/if}}
                <span>{{checkbox.label}}</span>
                {{#if checkbox.count}}
                  <Tag
                    @text={{checkbox.count.label}}
                    @theme='{{checkbox.count.color}} admin small'
                  />
                {{/if}}
              </button>
            {{/each}}
          </div>
        {{/if}}

        {{#if (eq filter.type 'search')}}
          <input />
        {{/if}}
      {{/each}}
    </div>
  </aside>

  <main>
    <table>
      <thead>
        <tr>
          {{#each @columns as |column|}}
            <th>
              {{column.label}}
            </th>
          {{/each}}
        </tr>
      </thead>
      <tbody>
        {{#each @records as |record|}}
          <tr role='button' onclick={{fn @onClickRecord record}}>
            {{#each @columns as |column|}}
              <td>
                {{#if column.tags}}
                  <Tag
                    @text={{get
                      (get column.tags (get record column.property))
                      'label'
                    }}
                    @theme='{{get
                      (get column.tags (get record column.property))
                      "color"
                    }} admin small'
                  />
                {{else}}
                  {{#let (get record column.property) as |label|}}
                    <p>{{label}}</p>
                  {{/let}}
                {{/if}}
              </td>
            {{/each}}
          </tr>
        {{else}}
          <tr class='no-rows'>
            <p>No data.</p>
            <Button
              @text='reset filters'
              @theme='medium grey'
              @onClick={{@onClickResetFilters}}
            />
          </tr>
        {{/each}}
      </tbody>
    </table>
  </main>
</div>